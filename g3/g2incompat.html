
<head><style>
    body        { background: #fff; text-color: #000; margin-left:  40px;   font-size:  0.9em;  font-family: sans-serif; max-width: 800px; }
    h1          { background: #ffb; text-color: #000; margin-left: -30px;   border-top:    5px  solid #ccc; }
    h2          { background: #ffb; text-color: #000; margin-left: -20px;   border-top:    3px  solid #ddd; }
    h3          { background: #ffb; text-color: #000; margin-left: -10px; }
    h4          { background: #ffb; text-color: #000; }
    code        { font-size:    1.1em;  background:  #ddf; text-color: #000; }
    pre         { margin-left:  2em;    background:  #ddf; text-color: #000; }
    pre code    { font-size:    1.1em;  background:  #ddf; text-color: #000; }
</style></head>

<p style="text-align:center">
    <a href="master-toc.html">master TOC</a>
|
    <a href="index.html">main page</a>
|
    <a href="index.html#license">license</a>
</p>
<h2><a name="g2incompat"></a> incompatibility with g2</h2>

<p>(other than in the rc file, which is dealt with <a href="g2rcdiff.html">elsewhere</a>)</p>

<p>The following incompatibilities exist, in vaguely decreasing order of
severity.  <strong>The ones in the first section are IMPORTANT because they allow
access that was previously not allowed -- please fix your config before using
the new gitolite!</strong></p>

<h3>NAME rules</h3>

<ol>
<li><p>NAME/ rules must be changed to VREF/NAME/</p></li>
<li><p>Fallthru on all VREFs is "success" now, so any NAME/ rules you have
<strong>MUST</strong> change the ruleset in some way to maintain the same restrictions.
The simplest is to add the following line to the end of each repo's rule
list:</p>

<pre><code>-   VREF/NAME/       =   @all
</code></pre></li>
</ol>

<h3>subconf command in admin repo</h3>

<p>(This is also affected by the previous issue, 'NAME rules'; please read that
as well).</p>

<p>If you're using delegation in your admin conf setup, please add the following
lines to the end of the gitolite-admin rules in your conf/gitolite.conf file:</p>

<pre><code>repo gitolite-admin
    -   VREF/NAME/       =   @all

subconf "fragments/*.conf"
</code></pre>

<p>The first part compensates for fallthru now being a success when processing
<a href="vref.html">VREF</a> rules (NAME rules are just one specific VREF).  Although,
<strong>ideally</strong>, you should change your ruleset so that you no longer require that
line.  As the <a href="vref.html">vref documentation</a> says:</p>

<blockquote>
  <p><strong>Virtual refs are best used as additional "deny" rules</strong>, performing
  extra checks that core gitolite cannot.</p>
</blockquote>

<p>The second part explicitly says when and where to include the subconf files.
(Before subconf was invented, this used to happen implicitly at the end of the
main conf file, and was hardcoded to that specific glob.)</p>
