
<head><style>
    body        { background: #fff; text-color: #000; margin-left:  40px;   font-size:  0.9em;  font-family: sans-serif; max-width: 800px; }
    h1          { background: #ffb; text-color: #000; margin-left: -30px;   border-top:    5px  solid #ccc; }
    h2          { background: #ffb; text-color: #000; margin-left: -20px;   border-top:    3px  solid #ddd; }
    h3          { background: #ffb; text-color: #000; margin-left: -10px; }
    h4          { background: #ffb; text-color: #000; }
    code        { font-size:    1.1em;  background:  #ddf; text-color: #000; }
    pre         { margin-left:  2em;    background:  #ddf; text-color: #000; }
    pre code    { font-size:    1.1em;  background:  #ddf; text-color: #000; }
</style></head>

<p style="text-align:center">
    <a href="master-toc.html">master TOC</a>
|
    <a href="index.html">main page</a>
|
    <a href="index.html#license">license</a>
</p>
<h1>installing gitolite</h1>

<p><font color="red"><strong>NOTE</strong>: if you're migrating from g2, there are some
settings that MUST be dealt with <strong>before</strong> running <code>gitolite setup</code>; please
start <a href="install.html#migr">here</a>.  RTFM is <em>mandatory</em> for migrations.</font></p>

<h2>notes and naming conventions</h2>

<p>Gitolite uses a single "real" (i.e., unix) user to provide secure access to
git repos to any number of "virtual" users, without giving them a shell.</p>

<p>The real user used is called the <strong>hosting user</strong>.  Typically this user is
<em>git</em>, and that is what we will use throughout the documentation.  However
RPMs and DEBs create a user called <em>gitolite</em> for this, so adjust instructions
and examples accordingly.</p>

<p>Notes:</p>

<ul>
<li>Any unix user can be a hosting user.</li>
<li>Which also means you can have several hosting users on the same machine.</li>
<li>The URLs used will be of the form <code>git@host:reponame</code> (or its longer
equivalent starting with <code>ssh://</code>).  The <code>.git</code> at the end is optional.  I
recommend you leave it out, so your reponames are consistent with what the
conf file uses.</li>
</ul>

<h2><a name="req"></a> requirements</h2>

<h3>your skills</h3>

<ul>
<li><p>If you're installing gitolite, you're a "system admin", like it or not.
Ssh is therefore a necessary skill.  Please take the time to learn at
least enough to get passwordless access working.</p></li>
<li><p>You also need to be somewhat familiar with git itself.  You cannot
administer a whole bunch of git repositories if you don't know the basics
of git.</p></li>
<li><p>Some familiarity with Unix and shells is probably required.</p></li>
<li><p>Regular expressions are a big part of gitolite in many places but
familiarity is not necessary to do <em>basic</em> access control.</p></li>
</ul>

<h3>server</h3>

<ul>
<li>any Unix system with a posix compatible "sh".</li>
<li>git version 1.6.6 or later</li>
<li>perl 5.8.8 or later</li>
<li>openssh (almost any version).  Optional if you're using the http backend
(which is still a TODO item!)</li>
<li>a dedicated Unix userid to be the hosting user, usually "git" but it can
be any user, even your own normal one.  (If you're using an RPM/DEB the
install probably created one called "gitolite").</li>
</ul>

<p>Also see the <a href="WARNINGS.html">WARNINGS</a> page for more on what gitolite expects on the server
side.</p>

<h3>client</h3>

<ul>
<li>openssh client</li>
<li>git 1.6.6 or later.  Almost any git client will work, as long as it knows
how to use ssh keys and send the right one along.</li>
</ul>

<h2>getting the software</h2>

<pre><code>git clone -b g3 git://github.com/sitaramc/gitolite
</code></pre>

<p>The -b g3' is needed until g3 becomes "master".  Current estimates put this
around June 2012, when the old gitolite (upto v2.x) will be retired and
supported only for security issues.</p>

<h2>the actual install</h2>

<p>Gitolite has only one server side "command" now, much like git itself.  This
command is <code>gitolite</code>.  You don't need to place it anywhere special; worst
case you run it with the full path.</p>

<p>"Installation" consists of the following options:</p>

<ol>
<li>Keep the sources anywhere and use the full path to run the <code>gitolite</code>
command.</li>
<li>Keep the sources anywhere and symlink <em>just</em> the <code>gitolite</code> program to
some directory on your <code>$PATH</code>.</li>
<li>Copy the sources somewhere and use that path to run the <code>gitolite</code>
command.</li>
</ol>

<p>Option 2 is the best for general use.</p>

<p>There is a program called 'install' that helps you do these easily.  Assuming
your cloned the repo like this:</p>

<pre><code>git clone -b g3 git://github.com/sitaramc/gitolite
</code></pre>

<p>you can run the 'install' command in 3 different ways:</p>

<pre><code># option 1
gitolite/install

# option 2
gitolite/install -ln
# defaults to $HOME/bin, or use a specific directory:
gitolite/install -ln /usr/local/bin

# option 3
gitolite/install -to /usr/local/gitolite/bin
</code></pre>

<p>Creating a symlink doesn't need a separate program but 'install' also runs
<code>git describe</code> to create a VERSION file, which, trust me, is important!</p>

<p><strong>Next step</strong>: run <a href="setup.html"><strong>setup</strong></a>.</p>

<h2>upgrading</h2>

<ul>
<li>Update your clone of the gitolite source.</li>
<li>Repeat the install command you used earlier (make sure you use the same
arguments as before).</li>
<li>Run <code>gitolite setup</code> just in case the hooks changed.</li>
</ul>

<h2>packaging gitolite</h2>

<ol>
<li><p>Put src/Gitolite in <code>/usr/share/perl5/vendor_perl</code> or some such place.</p></li>
<li><p>Put the rest of src anywhere your distro policy allows.  (Fedora keeps
git's 150 executables in /usr/libexec/git-core, so maybe
/usr/libexec/gitolite?)</p></li>
<li><p>Symlink 'gitolite' to /usr/bin or something, similar to option 2.</p></li>
</ol>

<p><strong>Bottom line</strong>:</p>

<ul>
<li><code>GL_BINDIR</code> must point to a place that contains <code>commands</code>, <code>VREF</code>, and
<code>syntactic-sugar</code> (so they must all be sibling directories).</li>
<li>The <code>Gitolite</code> directory can also be there, or it can be anywhere in
perl's <code>@INC</code> path.</li>
</ul>

<h2><a name="migr"></a> migrating</h2>

<p><font color="gray">If you're migrating from gitosis, <a href="gsmigr.html">this</a> is what
you want to start with.</font></p>

<p>First things first: g2 will be supported for a good long time for critical
bugs, although enhancements and new features won't happen.</p>

<p>If you're an existing (gitolite v1.x or v2.x) user, and wish to migrate , here
are the steps:</p>

<h3>pre-migration</h3>

<ol>
<li><p>Check the <a href="dev-status.html">dev-status</a> page to make sure all the features you want have
been implemented in g3.</p></li>
<li><p>Read the <a href="g2migr.html">g2 migration</a> page to see what changes affect you and
your users, and how much time it might take you to migrate.  (The closer
you were to a default install of the old gitolite, the less time a
migration will take.)</p></li>
</ol>

<h3>migration</h3>

<p><strong>Note</strong>: nothing in any of the gitolite install/setup/etc will ever touch the
<em>data</em> in any repository except the gitolite-admin repo.  The only thing it
will normally touch in normal repos is the <code>update</code> hook.</p>

<ol>
<li><p>Carefully wipe out the old gitolite</p>

<ul>
<li><p>the <strong>code</strong></p>

<ul>
<li><p>delete or move away all the old gitolite scripts.  Check the path
to the gl-auth-command in <code>~/.ssh/authorized_keys</code> if you forgot
where you put them.</p></li>
<li><p>delete or move away the two directories named in the two variables
<code>GL_PACKAGE_CONF</code> and <code>GL_PACKAGE_HOOKS</code> in <code>~/.gitolite.rc</code></p></li>
</ul></li>
<li><p>the <strong>rc file</strong></p>

<ul>
<li>rename <code>~/.gitolite.rc</code> to something else</li>
</ul></li>
<li><p>the <strong>admin repo</strong></p>

<ul>
<li>clone <code>~/repositories/gitolite-admin.git</code> to someplace safe</li>
<li>then delete <code>~/repositories/gitolite-admin.git</code></li>
</ul>

<p>(make sure you do not delete any other repos!)</p></li>
<li><p>the <strong>admin directory</strong></p>

<ul>
<li><p>if you need to preserve logs, move the ~/.gitolite/logs` directory
somewhere else</p></li>
<li><p>if you added any custom hooks and wish to preserve them, move the
~/.gitolite/hooks` directory somewhere else</p></li>
<li><p>delete <code>~/.gitolite</code></p></li>
</ul></li>
</ul></li>
<li><p>Read about <a href="g2migr.html#rc-preset">presetting</a> the rc file; if you're using any
variables listed as requiring preset, follow those instructions to create
your new rc file.</p></li>
<li><p>Install gitolite g3; see <a href="qi.html">quick install and setup</a> or <a href="install.html">install</a>
followed by <a href="setup.html">setup</a>.</p></li>
<li><p>Make sure your gitolite-admin clone has the correct pubkey for the
administrator in its <code>keydir</code> directory, then <code>git push -f</code> to the server
to overwrite the "default" admin repo created by the install.</p></li>
<li><p>Handle any errors, look for migration issues, etc., as described in the
links at the top of this page.</p>

<p>This also includes building up your new <code>~/.gitolite.rc</code> file.</p></li>
</ol>

<p>You're done.</p>
